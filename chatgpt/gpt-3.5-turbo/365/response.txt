# Response Time: 25.49413275718689
```
// Code before refactoring
public void paint(Graphics g, Shape shape) {
    int start = getStartOffset();
    int end = getEndOffset();
    Rectangle r;
    try {
        r = modelToView(start, Position.Bias.Forward, end, Position.Bias.Backward, shape);
    } catch (BadLocationException e) {
        return;
    }
    if (r == null) {
        return;
    }
    g.setColor(getBackground());
    g.fillRect(r.x, r.y, r.width, r.height);
    g.setColor(getForeground());
    drawSelectedText((Graphics2D) g, start, end, r.x, r.y + metrics.getAscent());
}

// Code after refactoring
public void paint(Graphics g, Shape shape) {
    int start = getStartOffset();
    int end = getEndOffset();
    Rectangle r;
    try {
        r = modelToView(start, Position.Bias.Forward, end, Position.Bias.Backward, shape);
    } catch (BadLocationException e) {
        return;
    }
    if (r == null) {
        return;
    }
    g.setColor(getBackground());
    g.fillRect(r.x, r.y, r.width, r.height);
    g.setColor(getForeground());
    drawSelectedText((Graphics2D) g, (float) r.x, (float) (r.y + metrics.getAscent()), start, end);
}
```